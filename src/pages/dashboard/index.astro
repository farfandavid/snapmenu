---
import PayementForm from "../../components/dashboard/PayementForm.astro";
import UserMenus from "../../components/dashboard/UserMenus.astro";
import DashboardLayout from "../../layouts/DashboardLayout.astro";
import { Menu } from "../../server/class/Menu";
import type { IUser } from "../../server/interface/User";

const user = Astro.locals.user as IUser;
const menus = await Menu.getMenusByUserEmail(user.email);
---

<DashboardLayout>
    <div class="flex flex-col items-center space-y-2">
        <h1 class="font-bold text-2xl">Bienvenido a SnapMenu</h1>
        <p class="text-xl">Empecemos!</p>
        {
            () => {
                if (user.menuLimit === 0) {
                    return <PayementForm />;
                }
            }
        }
        {
            () => {
                if (menus !== null) {
                    return <UserMenus menu={menus} user={user} />;
                }
            }
        }
    </div>
</DashboardLayout>
